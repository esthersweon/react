(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/Users/estherweon/Desktop/react/src/app.js":[function(require,module,exports){
require('./friendgroup.js')
require('./hello.js')
require('./tweet.js')

},{"./friendgroup.js":"/Users/estherweon/Desktop/react/src/friendgroup.js","./hello.js":"/Users/estherweon/Desktop/react/src/hello.js","./tweet.js":"/Users/estherweon/Desktop/react/src/tweet.js"}],"/Users/estherweon/Desktop/react/src/friendgroup.js":[function(require,module,exports){
var FriendGroupContainer = React.createClass({displayName: "FriendGroupContainer",
  getInitialState: function () {
    return {
      groups: [],
      friends: []
    };
  },
  componentDidMount: function () {
    // Set this.state.groups to most recent groups data from database
    this.loadGroupData();

    // Set this.state.friends to most recent friends data from database
    this.loadFriendData();
  },
  loadGroupData: function () {
    // GET updated groups from database
    $.ajax({
      method: 'GET',
      url: '/groups',
      success: function (data) {
        this.setState({
          groups: data
        });
      }.bind(this),
      error: function (xhr, status, err) {
        console.error(status, err.toString());
      }.bind(this)
    });
  },
  loadFriendData: function () {
    // GET updated friends from database
    $.ajax({
      method: 'GET',
      url: '/friends',
      success: function (data) {
        this.setState({
          friends: data
        });
      }.bind(this),
      error: function (xhr, status, err) {
        console.error(status, err.toString());
      }.bind(this)
    });
  },
  handleAddFriend: function (groupId, friendId) {
    var url = '/groups/' + groupId + '/friends/' + friendId;

    // POST new friend to a group
    $.ajax({
      method: 'POST',
      url: url,
      success: function (response) {
        this.setState({
          groups: response
        });
      }.bind(this),
      error: function (xhr, status, err) {
        console.error(url, status, err.toString());
      }.bind(this)
    });
  },
  handleRemoveFriend: function (groupId, friendId) {
    var url = '/groups/' + groupId + '/friends/' + friendId;

    // DELETE friend from group
    $.ajax({
      method: 'DELETE',
      url: url,
      success: function (response) {
        this.setState({
          groups: response
        });
      }.bind(this),
      error: function (xhr, status, err) {
        console.error(url, status, err.toString());
      }.bind(this)
    });
  },
  getFriendGroupNodes: function() {
    return this.state.groups.map(function (group, idx) {
      var friends = this.state.friends.filter(function (friend) {
        return group.friendIds.indexOf(friend.id) > -1;
      });

      return (
        React.createElement(FriendGroup, {
          key:  idx, 
          id:  group.id, 
          name:  group.name, 
          friends:  this.state.friends, 
          groupFriends:  friends, 
          handleAddFriend:  this.handleAddFriend, 
          handleRemoveFriend:  this.handleRemoveFriend})
      )
    }.bind(this));
  },
  render: function () {
    return (
      React.createElement("div", null, 
        React.createElement("h2", null, "Friend Groups"), 
         this.getFriendGroupNodes() 
      )
    );
  }
});

var FriendGroup = React.createClass({displayName: "FriendGroup",
  render: function () {
    return (
      React.createElement("div", {className: "panel panel-default"}, 
        React.createElement("div", {className: "panel-heading"}, this.props.name), 
        React.createElement(FriendSearch, {
          groupId:  this.props.id, 
          friends:  this.props.friends, 
          handleAddFriend:  this.props.handleAddFriend}), 
        React.createElement(FriendsList, {
          groupId:  this.props.id, 
          friends:  this.props.groupFriends, 
          actionType: "Remove", 
          handleAction:  this.props.handleRemoveFriend})
      )
    );
  }
});

var FriendSearch = React.createClass({displayName: "FriendSearch",
  getInitialState: function () {
    return {
      searchTerm: '',
      filteredFriends: []
    }
  },
  handleAddFriend: function (groupId, friendId) {
    this.props.handleAddFriend(groupId, friendId);

    this.setState({
      searchTerm: '',
      filteredFriends: []
    })
  },
  handleTextChange: function (e) {
    var searchTerm = e.target.value;

    var filteredFriends = this.props.friends.filter(function (friend) {
      return searchTerm && friend.name.toLowerCase().includes(searchTerm.toLowerCase());
    });

    this.setState({
      searchTerm: searchTerm,
      filteredFriends: filteredFriends
    });
  },
  render: function () {
    return (
      React.createElement("div", {className: "panel-body"}, 
        React.createElement("input", {className: "form-control", 
          type: "text", 
          placeholder: "Search for friends", 
          value:  this.state.searchTerm, 
          onChange:  this.handleTextChange}), 
        React.createElement(FriendsList, {
          groupId:  this.props.groupId, 
          friends:  this.state.filteredFriends, 
          actionType: "Add", 
          handleAction:  this.handleAddFriend})
      )
    );
  }
});

var FriendsList = React.createClass({displayName: "FriendsList",
  handleAction: function (friend_id, e) {
    e.preventDefault();
    this.props.handleAction(this.props.groupId, friend_id);
  },
  getFriendNodes: function() {
    return this.props.friends.map(function (friend, idx) {
      return (
        React.createElement("li", {key:  idx, className: "list-group-item"}, 
          React.createElement("form", {className: "clearfix", onSubmit:  this.handleAction.bind(this, friend.id) }, 
             friend.name, 
            React.createElement("button", {className: "btn btn-default pull-right"},  this.props.actionType)
          )
        )
      );
    }.bind(this));
  },
  render: function () {
    return (
      React.createElement("ul", {className: "list-group"}, 
         this.getFriendNodes() 
      )
    );
  }
});

React.render(
  React.createElement(FriendGroupContainer, null),
  document.getElementById('friend-group')
);

},{}],"/Users/estherweon/Desktop/react/src/hello.js":[function(require,module,exports){
var styles = {
  text: {
    fontSize: '32px', 
    fontWeight: '600', 
    textDecoration: 'underline'
  }, 
  secondsText: {
    color: 'mediumaquamarine',
    fontSize: '24px'
  }
};

var Hello = React.createClass({displayName: "Hello",
  getInitialState: function () {
    return { seconds: 0 };
  },
  componentDidMount: function () {
    setInterval(function () {
      this.setState({ seconds: this.state.seconds + 1 });
    }.bind(this), 1000);
  },
  render: function() {
    return (
      React.createElement("div", {className: "timer"}, 
        React.createElement("div", {style:  styles.text},  this.props.text), 
        React.createElement("div", {style:  styles.secondsText},  this.state.seconds, " seconds")
      )
    );
  }
});

React.render(
  React.createElement(Hello, {text: "Time Spent on Page:"}),
  document.getElementById('hello')
);

},{}],"/Users/estherweon/Desktop/react/src/tweet.js":[function(require,module,exports){
var TwitterContainer = React.createClass({displayName: "TwitterContainer",
  getInitialState: function() {
    return { data: [] };
  },
  loadTweetsFromServer: function() {
    // GET updated set of tweets from database
    $.ajax({
      url: this.props.url,
      dataType: 'json',
      cache: false,
      success: function(data) {
        this.setState({ 
          data: data 
        });
      }.bind(this),
      error: function(xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }.bind(this)
    });
  },
  handleTweetSubmit: function(tweet) {
    // Make copy of this.state.data
    // IMPORTANT: never directly manipulate this.state or this.props
    var tweets = this.state.data.slice();

    // Add most recent tweet to beginning of tweets array
    tweets.unshift(tweet);

    // POST updated set of tweets back to database
    this.setState({ data: tweets }, function() {
      $.ajax({
        url: this.props.url,
        dataType: 'json',
        type: 'POST',
        data: tweet,
        success: function(data) {
          this.setState({
            data: data
          });
        }.bind(this),
        error: function(xhr, status, err) {
          console.error(this.props.url, status, err.toString());
        }.bind(this)
      });
    });
  },
  componentDidMount: function() {
    // Set this.state.data to most recent set of tweets from database
    this.loadTweetsFromServer();

    // Ping database for updated set of tweets every 2000 ms
    setInterval(this.loadTweetsFromServer, this.props.pollInterval);
  },
  render: function() {
    return (
      React.createElement("div", {className: "tweetBox"}, 
        React.createElement("h1", null, "Tweets"), 
        React.createElement(TweetForm, {onTweetSubmit:  this.handleTweetSubmit}), 
        React.createElement(TweetList, {data:  this.state.data})
      )
    );
  }
});

var TweetForm = React.createClass({displayName: "TweetForm",
  handleSubmit: function(e) {
    e.preventDefault();

    // Get new author and text from the input fields
    var author = React.findDOMNode(this.refs.author).value.trim();
    var text = React.findDOMNode(this.refs.text).value.trim();

    // Do nothing if either input field is blank
    if (!text || !author) {
      return;
    }

    // Send new author and text up one level to TwitterContainer component
    // so updated tweets can be passed down again into TweetList component
    this.props.onTweetSubmit({author: author, text: text});

    // Set input fields back to empty
    React.findDOMNode(this.refs.author).value = '';
    React.findDOMNode(this.refs.text).value = '';
  },
  render: function() {
    return (
      React.createElement("form", {className: "tweetForm", onSubmit:  this.handleSubmit}, 
        React.createElement("div", {className: "col-md-3"}, 
          React.createElement("input", {type: "text", className: "form-control", placeholder: "Author Name", ref: "author"})
        ), 
        React.createElement("div", {className: "col-md-7"}, 
          React.createElement("input", {type: "text", className: "form-control", placeholder: "Tweet (140 chars max)", ref: "text"})
        ), 
        React.createElement("div", {className: "col-md-2"}, 
          React.createElement("input", {type: "submit", className: "btn btn-info", value: "Tweet"})
        )
      )
    );
  }
});

var TweetList = React.createClass({displayName: "TweetList",
  render: function() {
    var tweetNodes = this.props.data.reverse().map(function(tweet, idx) {
      return (
        // 'key' is a React-specific concept, but not mandatory for this tutorial
        // http://facebook.github.io/react/docs/multiple-components.html#dynamic-children
        React.createElement(Tweet, {key:  idx, author:  tweet.author, text:  tweet.text})
      );
    });
    return (
      React.createElement("div", {className: "tweetList"}, 
         tweetNodes 
      )
    );
  }
});

var Tweet = React.createClass({displayName: "Tweet",
  render: function() {
    return (
      React.createElement("div", {className: "tweet"}, 
        React.createElement("h2", {className: "tweetText"},  this.props.text), 
        React.createElement("span", {className: "tweetAuthor"}, " - ",  this.props.author)
      )
    );
  }
});


React.render(
  React.createElement(TwitterContainer, {url: "tweets.json", pollInterval:  2000 }),
  document.getElementById('tweets')
);

},{}]},{},["/Users/estherweon/Desktop/react/src/app.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvZXN0aGVyd2Vvbi9EZXNrdG9wL3JlYWN0L3NyYy9hcHAuanMiLCIvVXNlcnMvZXN0aGVyd2Vvbi9EZXNrdG9wL3JlYWN0L3NyYy9mcmllbmRncm91cC5qcyIsIi9Vc2Vycy9lc3RoZXJ3ZW9uL0Rlc2t0b3AvcmVhY3Qvc3JjL2hlbGxvLmpzIiwiL1VzZXJzL2VzdGhlcndlb24vRGVza3RvcC9yZWFjdC9zcmMvdHdlZXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFDM0IsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUNyQixPQUFPLENBQUMsWUFBWTs7O0FDRnBCLElBQUksMENBQTBDLG9DQUFBO0VBQzVDLGVBQWUsRUFBRSxZQUFZO0lBQzNCLE9BQU87TUFDTCxNQUFNLEVBQUUsRUFBRTtNQUNWLE9BQU8sRUFBRSxFQUFFO0tBQ1osQ0FBQztHQUNIO0FBQ0gsRUFBRSxpQkFBaUIsRUFBRSxZQUFZOztBQUVqQyxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztBQUN6Qjs7SUFFSSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7R0FDdkI7QUFDSCxFQUFFLGFBQWEsRUFBRSxZQUFZOztJQUV6QixDQUFDLENBQUMsSUFBSSxDQUFDO01BQ0wsTUFBTSxFQUFFLEtBQUs7TUFDYixHQUFHLEVBQUUsU0FBUztNQUNkLE9BQU8sRUFBRSxVQUFVLElBQUksRUFBRTtRQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDO1VBQ1osTUFBTSxFQUFFLElBQUk7U0FDYixDQUFDLENBQUM7T0FDSixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDWixLQUFLLEVBQUUsVUFBVSxHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNqQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFB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QUFJLENBQUUsQ0FBRSxDQUFBO1FBQ2hFO0tBQ0gsQ0FBQyxDQUFDO0lBQ0g7TUFDRSxvQkFBQSxLQUFJLEVBQUEsQ0FBQSxDQUFDLFNBQUEsRUFBUyxDQUFDLFdBQVksQ0FBQSxFQUFBO1FBQ3hCLENBQUMsV0FBWTtNQUNWLENBQUE7TUFDTjtHQUNIO0FBQ0gsQ0FBQyxDQUFDLENBQUM7O0FBRUgsSUFBSSwyQkFBMkIscUJBQUE7RUFDN0IsTUFBTSxFQUFFLFdBQVc7SUFDakI7TUFDRSxvQkFBQSxLQUFJLEVBQUEsQ0FBQSxDQUFDLFNBQUEsRUFBUyxDQUFDLE9BQVEsQ0FBQSxFQUFBO1FBQ3JCLG9CQUFBLElBQUcsRUFBQSxDQUFBLENBQUMsU0FBQSxFQUFTLENBQUMsV0FBWSxDQUFBLEVBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBTyxDQUFBLEVBQUE7UUFDbEQsb0JBQUEsTUFBSyxFQUFBLENBQUEsQ0FBQyxTQUFBLEVBQVMsQ0FBQyxhQUFjLENBQUEsRUFBQSxLQUFBLEVBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBUyxDQUFBO01BQ3pELENBQUE7TUFDTjtHQUNIO0FBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDSDs7QUFFQSxLQUFLLENBQUMsTUFBTTtFQUNWLG9CQUFDLGdCQUFnQixFQUFBLENBQUEsQ0FBQyxHQUFBLEVBQUcsQ0FBQyxhQUFBLEVBQWEsQ0FBQyxZQUFBLEVBQVksQ0FBRSxDQUFDLEtBQU0sQ0FBQSxDQUFHLENBQUE7RUFDNUQsUUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUM7Q0FDbEMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJyZXF1aXJlKCcuL2ZyaWVuZGdyb3VwLmpzJylcbnJlcXVpcmUoJy4vaGVsbG8uanMnKVxucmVxdWlyZSgnLi90d2VldC5qcycpIiwidmFyIEZyaWVuZEdyb3VwQ29udGFpbmVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ3JvdXBzOiBbXSxcbiAgICAgIGZyaWVuZHM6IFtdXG4gICAgfTtcbiAgfSxcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBTZXQgdGhpcy5zdGF0ZS5ncm91cHMgdG8gbW9zdCByZWNlbnQgZ3JvdXBzIGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgIHRoaXMubG9hZEdyb3VwRGF0YSgpO1xuXG4gICAgLy8gU2V0IHRoaXMuc3RhdGUuZnJpZW5kcyB0byBtb3N0IHJlY2VudCBmcmllbmRzIGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgIHRoaXMubG9hZEZyaWVuZERhdGEoKTtcbiAgfSxcbiAgbG9hZEdyb3VwRGF0YTogZnVuY3Rpb24gKCkge1xuICAgIC8vIEdFVCB1cGRhdGVkIGdyb3VwcyBmcm9tIGRhdGFiYXNlXG4gICAgJC5hamF4KHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmw6ICcvZ3JvdXBzJyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGdyb3VwczogZGF0YVxuICAgICAgICB9KTtcbiAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH0sXG4gIGxvYWRGcmllbmREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gR0VUIHVwZGF0ZWQgZnJpZW5kcyBmcm9tIGRhdGFiYXNlXG4gICAgJC5hamF4KHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmw6ICcvZnJpZW5kcycsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBmcmllbmRzOiBkYXRhXG4gICAgICAgIH0pO1xuICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3Ioc3RhdHVzLCBlcnIudG9TdHJpbmcoKSk7XG4gICAgICB9LmJpbmQodGhpcylcbiAgICB9KTtcbiAgfSxcbiAgaGFuZGxlQWRkRnJpZW5kOiBmdW5jdGlvbiAoZ3JvdXBJZCwgZnJpZW5kSWQpIHtcbiAgICB2YXIgdXJsID0gJy9ncm91cHMvJyArIGdyb3VwSWQgKyAnL2ZyaWVuZHMvJyArIGZyaWVuZElkO1xuXG4gICAgLy8gUE9TVCBuZXcgZnJpZW5kIHRvIGEgZ3JvdXBcbiAgICAkLmFqYXgoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBncm91cHM6IHJlc3BvbnNlXG4gICAgICAgIH0pO1xuICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodXJsLCBzdGF0dXMsIGVyci50b1N0cmluZygpKTtcbiAgICAgIH0uYmluZCh0aGlzKVxuICAgIH0pO1xuICB9LFxuICBoYW5kbGVSZW1vdmVGcmllbmQ6IGZ1bmN0aW9uIChncm91cElkLCBmcmllbmRJZCkge1xuICAgIHZhciB1cmwgPSAnL2dyb3Vwcy8nICsgZ3JvdXBJZCArICcvZnJpZW5kcy8nICsgZnJpZW5kSWQ7XG5cbiAgICAvLyBERUxFVEUgZnJpZW5kIGZyb20gZ3JvdXBcbiAgICAkLmFqYXgoe1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIHVybDogdXJsLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGdyb3VwczogcmVzcG9uc2VcbiAgICAgICAgfSk7XG4gICAgICB9LmJpbmQodGhpcyksXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcih1cmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH0sXG4gIGdldEZyaWVuZEdyb3VwTm9kZXM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmdyb3Vwcy5tYXAoZnVuY3Rpb24gKGdyb3VwLCBpZHgpIHtcbiAgICAgIHZhciBmcmllbmRzID0gdGhpcy5zdGF0ZS5mcmllbmRzLmZpbHRlcihmdW5jdGlvbiAoZnJpZW5kKSB7XG4gICAgICAgIHJldHVybiBncm91cC5mcmllbmRJZHMuaW5kZXhPZihmcmllbmQuaWQpID4gLTE7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEZyaWVuZEdyb3VwXG4gICAgICAgICAga2V5PXsgaWR4IH1cbiAgICAgICAgICBpZD17IGdyb3VwLmlkIH1cbiAgICAgICAgICBuYW1lPXsgZ3JvdXAubmFtZSB9XG4gICAgICAgICAgZnJpZW5kcz17IHRoaXMuc3RhdGUuZnJpZW5kcyB9XG4gICAgICAgICAgZ3JvdXBGcmllbmRzPXsgZnJpZW5kcyB9XG4gICAgICAgICAgaGFuZGxlQWRkRnJpZW5kPXsgdGhpcy5oYW5kbGVBZGRGcmllbmQgfVxuICAgICAgICAgIGhhbmRsZVJlbW92ZUZyaWVuZD17IHRoaXMuaGFuZGxlUmVtb3ZlRnJpZW5kIH0gLz5cbiAgICAgIClcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGgyPkZyaWVuZCBHcm91cHM8L2gyPlxuICAgICAgICB7IHRoaXMuZ2V0RnJpZW5kR3JvdXBOb2RlcygpIH1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgRnJpZW5kR3JvdXAgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1oZWFkaW5nXCI+e3RoaXMucHJvcHMubmFtZX08L2Rpdj5cbiAgICAgICAgPEZyaWVuZFNlYXJjaFxuICAgICAgICAgIGdyb3VwSWQ9eyB0aGlzLnByb3BzLmlkIH1cbiAgICAgICAgICBmcmllbmRzPXsgdGhpcy5wcm9wcy5mcmllbmRzIH1cbiAgICAgICAgICBoYW5kbGVBZGRGcmllbmQ9eyB0aGlzLnByb3BzLmhhbmRsZUFkZEZyaWVuZCB9IC8+XG4gICAgICAgIDxGcmllbmRzTGlzdFxuICAgICAgICAgIGdyb3VwSWQ9eyB0aGlzLnByb3BzLmlkIH1cbiAgICAgICAgICBmcmllbmRzPXsgdGhpcy5wcm9wcy5ncm91cEZyaWVuZHMgfVxuICAgICAgICAgIGFjdGlvblR5cGU9XCJSZW1vdmVcIlxuICAgICAgICAgIGhhbmRsZUFjdGlvbj17IHRoaXMucHJvcHMuaGFuZGxlUmVtb3ZlRnJpZW5kIH0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgRnJpZW5kU2VhcmNoID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VhcmNoVGVybTogJycsXG4gICAgICBmaWx0ZXJlZEZyaWVuZHM6IFtdXG4gICAgfVxuICB9LFxuICBoYW5kbGVBZGRGcmllbmQ6IGZ1bmN0aW9uIChncm91cElkLCBmcmllbmRJZCkge1xuICAgIHRoaXMucHJvcHMuaGFuZGxlQWRkRnJpZW5kKGdyb3VwSWQsIGZyaWVuZElkKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VhcmNoVGVybTogJycsXG4gICAgICBmaWx0ZXJlZEZyaWVuZHM6IFtdXG4gICAgfSlcbiAgfSxcbiAgaGFuZGxlVGV4dENoYW5nZTogZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgc2VhcmNoVGVybSA9IGUudGFyZ2V0LnZhbHVlO1xuXG4gICAgdmFyIGZpbHRlcmVkRnJpZW5kcyA9IHRoaXMucHJvcHMuZnJpZW5kcy5maWx0ZXIoZnVuY3Rpb24gKGZyaWVuZCkge1xuICAgICAgcmV0dXJuIHNlYXJjaFRlcm0gJiYgZnJpZW5kLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzZWFyY2hUZXJtOiBzZWFyY2hUZXJtLFxuICAgICAgZmlsdGVyZWRGcmllbmRzOiBmaWx0ZXJlZEZyaWVuZHNcbiAgICB9KTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYm9keVwiPlxuICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCJcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWFyY2ggZm9yIGZyaWVuZHNcIlxuICAgICAgICAgIHZhbHVlPXsgdGhpcy5zdGF0ZS5zZWFyY2hUZXJtIH1cbiAgICAgICAgICBvbkNoYW5nZT17IHRoaXMuaGFuZGxlVGV4dENoYW5nZSB9IC8+XG4gICAgICAgIDxGcmllbmRzTGlzdFxuICAgICAgICAgIGdyb3VwSWQ9eyB0aGlzLnByb3BzLmdyb3VwSWQgfVxuICAgICAgICAgIGZyaWVuZHM9eyB0aGlzLnN0YXRlLmZpbHRlcmVkRnJpZW5kcyB9XG4gICAgICAgICAgYWN0aW9uVHlwZT1cIkFkZFwiXG4gICAgICAgICAgaGFuZGxlQWN0aW9uPXsgdGhpcy5oYW5kbGVBZGRGcmllbmQgfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBGcmllbmRzTGlzdCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgaGFuZGxlQWN0aW9uOiBmdW5jdGlvbiAoZnJpZW5kX2lkLCBlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMucHJvcHMuaGFuZGxlQWN0aW9uKHRoaXMucHJvcHMuZ3JvdXBJZCwgZnJpZW5kX2lkKTtcbiAgfSxcbiAgZ2V0RnJpZW5kTm9kZXM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmZyaWVuZHMubWFwKGZ1bmN0aW9uIChmcmllbmQsIGlkeCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGxpIGtleT17IGlkeCB9IGNsYXNzTmFtZT1cImxpc3QtZ3JvdXAtaXRlbVwiPlxuICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImNsZWFyZml4XCIgb25TdWJtaXQ9eyB0aGlzLmhhbmRsZUFjdGlvbi5iaW5kKHRoaXMsIGZyaWVuZC5pZCkgfT5cbiAgICAgICAgICAgIHsgZnJpZW5kLm5hbWUgfVxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHQgcHVsbC1yaWdodFwiPnsgdGhpcy5wcm9wcy5hY3Rpb25UeXBlIH08L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvbGk+XG4gICAgICApO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8dWwgY2xhc3NOYW1lPVwibGlzdC1ncm91cFwiPlxuICAgICAgICB7IHRoaXMuZ2V0RnJpZW5kTm9kZXMoKSB9XG4gICAgICA8L3VsPlxuICAgICk7XG4gIH1cbn0pO1xuXG5SZWFjdC5yZW5kZXIoXG4gIDxGcmllbmRHcm91cENvbnRhaW5lci8+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnJpZW5kLWdyb3VwJylcbik7XG4iLCJ2YXIgc3R5bGVzID0ge1xuICB0ZXh0OiB7XG4gICAgZm9udFNpemU6ICczMnB4JywgXG4gICAgZm9udFdlaWdodDogJzYwMCcsIFxuICAgIHRleHREZWNvcmF0aW9uOiAndW5kZXJsaW5lJ1xuICB9LCBcbiAgc2Vjb25kc1RleHQ6IHtcbiAgICBjb2xvcjogJ21lZGl1bWFxdWFtYXJpbmUnLFxuICAgIGZvbnRTaXplOiAnMjRweCdcbiAgfVxufTtcblxudmFyIEhlbGxvID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4geyBzZWNvbmRzOiAwIH07XG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNlY29uZHM6IHRoaXMuc3RhdGUuc2Vjb25kcyArIDEgfSk7XG4gICAgfS5iaW5kKHRoaXMpLCAxMDAwKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aW1lclwiPlxuICAgICAgICA8ZGl2IHN0eWxlPXsgc3R5bGVzLnRleHQgfT57IHRoaXMucHJvcHMudGV4dCB9PC9kaXY+XG4gICAgICAgIDxkaXYgc3R5bGU9eyBzdHlsZXMuc2Vjb25kc1RleHQgfT57IHRoaXMuc3RhdGUuc2Vjb25kcyB9IHNlY29uZHM8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG5SZWFjdC5yZW5kZXIoXG4gIDxIZWxsbyB0ZXh0PVwiVGltZSBTcGVudCBvbiBQYWdlOlwiIC8+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVsbG8nKVxuKTtcbiIsInZhciBUd2l0dGVyQ29udGFpbmVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7IGRhdGE6IFtdIH07XG4gIH0sXG4gIGxvYWRUd2VldHNGcm9tU2VydmVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyBHRVQgdXBkYXRlZCBzZXQgb2YgdHdlZXRzIGZyb20gZGF0YWJhc2VcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiB0aGlzLnByb3BzLnVybCxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBjYWNoZTogZmFsc2UsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgICAgICBkYXRhOiBkYXRhIFxuICAgICAgICB9KTtcbiAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy51cmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH0sXG4gIGhhbmRsZVR3ZWV0U3VibWl0OiBmdW5jdGlvbih0d2VldCkge1xuICAgIC8vIE1ha2UgY29weSBvZiB0aGlzLnN0YXRlLmRhdGFcbiAgICAvLyBJTVBPUlRBTlQ6IG5ldmVyIGRpcmVjdGx5IG1hbmlwdWxhdGUgdGhpcy5zdGF0ZSBvciB0aGlzLnByb3BzXG4gICAgdmFyIHR3ZWV0cyA9IHRoaXMuc3RhdGUuZGF0YS5zbGljZSgpO1xuXG4gICAgLy8gQWRkIG1vc3QgcmVjZW50IHR3ZWV0IHRvIGJlZ2lubmluZyBvZiB0d2VldHMgYXJyYXlcbiAgICB0d2VldHMudW5zaGlmdCh0d2VldCk7XG5cbiAgICAvLyBQT1NUIHVwZGF0ZWQgc2V0IG9mIHR3ZWV0cyBiYWNrIHRvIGRhdGFiYXNlXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGE6IHR3ZWV0cyB9LCBmdW5jdGlvbigpIHtcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDogdGhpcy5wcm9wcy51cmwsXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgZGF0YTogdHdlZXQsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICB9KTtcbiAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy51cmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy8gU2V0IHRoaXMuc3RhdGUuZGF0YSB0byBtb3N0IHJlY2VudCBzZXQgb2YgdHdlZXRzIGZyb20gZGF0YWJhc2VcbiAgICB0aGlzLmxvYWRUd2VldHNGcm9tU2VydmVyKCk7XG5cbiAgICAvLyBQaW5nIGRhdGFiYXNlIGZvciB1cGRhdGVkIHNldCBvZiB0d2VldHMgZXZlcnkgMjAwMCBtc1xuICAgIHNldEludGVydmFsKHRoaXMubG9hZFR3ZWV0c0Zyb21TZXJ2ZXIsIHRoaXMucHJvcHMucG9sbEludGVydmFsKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0d2VldEJveFwiPlxuICAgICAgICA8aDE+VHdlZXRzPC9oMT5cbiAgICAgICAgPFR3ZWV0Rm9ybSBvblR3ZWV0U3VibWl0PXsgdGhpcy5oYW5kbGVUd2VldFN1Ym1pdCB9IC8+XG4gICAgICAgIDxUd2VldExpc3QgZGF0YT17IHRoaXMuc3RhdGUuZGF0YSB9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59KTtcblxudmFyIFR3ZWV0Rm9ybSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gR2V0IG5ldyBhdXRob3IgYW5kIHRleHQgZnJvbSB0aGUgaW5wdXQgZmllbGRzXG4gICAgdmFyIGF1dGhvciA9IFJlYWN0LmZpbmRET01Ob2RlKHRoaXMucmVmcy5hdXRob3IpLnZhbHVlLnRyaW0oKTtcbiAgICB2YXIgdGV4dCA9IFJlYWN0LmZpbmRET01Ob2RlKHRoaXMucmVmcy50ZXh0KS52YWx1ZS50cmltKCk7XG5cbiAgICAvLyBEbyBub3RoaW5nIGlmIGVpdGhlciBpbnB1dCBmaWVsZCBpcyBibGFua1xuICAgIGlmICghdGV4dCB8fCAhYXV0aG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2VuZCBuZXcgYXV0aG9yIGFuZCB0ZXh0IHVwIG9uZSBsZXZlbCB0byBUd2l0dGVyQ29udGFpbmVyIGNvbXBvbmVudFxuICAgIC8vIHNvIHVwZGF0ZWQgdHdlZXRzIGNhbiBiZSBwYXNzZWQgZG93biBhZ2FpbiBpbnRvIFR3ZWV0TGlzdCBjb21wb25lbnRcbiAgICB0aGlzLnByb3BzLm9uVHdlZXRTdWJtaXQoe2F1dGhvcjogYXV0aG9yLCB0ZXh0OiB0ZXh0fSk7XG5cbiAgICAvLyBTZXQgaW5wdXQgZmllbGRzIGJhY2sgdG8gZW1wdHlcbiAgICBSZWFjdC5maW5kRE9NTm9kZSh0aGlzLnJlZnMuYXV0aG9yKS52YWx1ZSA9ICcnO1xuICAgIFJlYWN0LmZpbmRET01Ob2RlKHRoaXMucmVmcy50ZXh0KS52YWx1ZSA9ICcnO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Zm9ybSBjbGFzc05hbWU9XCJ0d2VldEZvcm1cIiBvblN1Ym1pdD17IHRoaXMuaGFuZGxlU3VibWl0IH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTNcIj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIkF1dGhvciBOYW1lXCIgcmVmPVwiYXV0aG9yXCIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTdcIj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIlR3ZWV0ICgxNDAgY2hhcnMgbWF4KVwiIHJlZj1cInRleHRcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtMlwiPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1pbmZvXCIgdmFsdWU9XCJUd2VldFwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgVHdlZXRMaXN0ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0d2VldE5vZGVzID0gdGhpcy5wcm9wcy5kYXRhLnJldmVyc2UoKS5tYXAoZnVuY3Rpb24odHdlZXQsIGlkeCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgLy8gJ2tleScgaXMgYSBSZWFjdC1zcGVjaWZpYyBjb25jZXB0LCBidXQgbm90IG1hbmRhdG9yeSBmb3IgdGhpcyB0dXRvcmlhbFxuICAgICAgICAvLyBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvbXVsdGlwbGUtY29tcG9uZW50cy5odG1sI2R5bmFtaWMtY2hpbGRyZW5cbiAgICAgICAgPFR3ZWV0IGtleT17IGlkeCB9IGF1dGhvcj17IHR3ZWV0LmF1dGhvciB9IHRleHQ9eyB0d2VldC50ZXh0IH0vPlxuICAgICAgKTtcbiAgICB9KTtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0d2VldExpc3RcIj5cbiAgICAgICAgeyB0d2VldE5vZGVzIH1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgVHdlZXQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHdlZXRcIj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInR3ZWV0VGV4dFwiPnsgdGhpcy5wcm9wcy50ZXh0IH08L2gyPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0d2VldEF1dGhvclwiPiAtIHsgdGhpcy5wcm9wcy5hdXRob3IgfTwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG5cblJlYWN0LnJlbmRlcihcbiAgPFR3aXR0ZXJDb250YWluZXIgdXJsPVwidHdlZXRzLmpzb25cIiBwb2xsSW50ZXJ2YWw9eyAyMDAwIH0gLz4sXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0d2VldHMnKVxuKTtcbiJdfQ==
